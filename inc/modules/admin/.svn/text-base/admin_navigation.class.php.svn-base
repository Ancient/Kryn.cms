<?php

class admin_navigation {

    function init(){
        switch( getArgv(2) ){
        case 'save':
            return admin_navigation::save();
        case 'add':
            return admin_navigation::add();
        case 'del':
            return admin_navigation::del();
        }
    }

    function del(){
        $rsn = $_REQUEST['rsn']+0;
        dbExec( "DELETE FROM %pfx%system_pages WHERE navigation_rsn = $rsn" );
        dbExec( "DELETE FROM %pfx%system_navigations WHERE rsn = $rsn" );
        json( true );
    }

    function save(){
        $rsn = $_REQUEST['rsn']+0;
        $name = $_REQUEST['nname'];
        dbExec( "UPDATE %pfx%system_navigations SET name = '$name' WHERE rsn = $rsn" );
        json( true );
    }

    function add(){
        $name = $_REQUEST['nname'];
        $domain = $_REQUEST['domain_rsn']+0;
        dbExec( "INSERT INTO %pfx%system_navigations (name, domain_rsn, visible) VALUES ( '$name', $domain, 1 )" );
        json( true );
    }

}

?>