<?php

/**
 * 
 * Global template functions
 * 
 * @author Kryn.labs <info@krynlabs.com>
 * @package Kryn
 * @subpackage FrameworkTemplate
 */

/**
 * Defines a value to the specified name in the template engine
 * 
 * Accessible in template engine {$<$pName>}
 *  
 * @param type $pName
 * @param type $pVal
 */
function tAssign( $pName, $pVal ){
    global $tpl;
    return $tpl->assign( $pName, $pVal );
}

/**
 * Parse and compiled specified template and return the parsed template.
 * Path pFile is relative to inc/template/
 * 
 * @param type $pFile
 * @return string Parsed template file 
 */
function tFetch( $pFile ){
    global $tpl;
    return preg_replace_callback(
        //'/\[([^\"\\\'\{\#\ยง\$\&\n\ ].*[^\"\\\'\{\#\ยง\$\&\n\ ])\]/',
        '/([^\\\\]?)\[\[([^\]]*)\]\]/',
        create_function(
            '$pP',
            '
            return $pP[1]._l( $pP[2] );
            '
        ),
        $tpl->fetch( $pFile )
    );    
}
?>
